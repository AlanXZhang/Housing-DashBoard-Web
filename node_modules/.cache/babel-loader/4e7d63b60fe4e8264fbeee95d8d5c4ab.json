{"ast":null,"code":"var _jsxFileName = \"/Users/alanzhang/Housing-DashBoard-Web/hd-web/src/components/Map.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport \"./Map.css\";\nimport GoogleMapReact from 'google-map-react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Map(props) {\n  _s();\n\n  const [mapCenter, setMapCenter] = useState({\n    lat: 32.86867512568862,\n    lng: -117.21368983643102\n  });\n  const [mapZoom, setMapZoom] = useState(14);\n  const [heatmapData, setHeatmapData] = React.useState({});\n  const [heatmap, toggleHeatmap] = useState(false);\n  const [inputData, setInputData] = useState([]); // Use square root transformation of the price variable to deal with right skewed data \n\n  useEffect(() => {\n    const median_price = d3.median(props.data, d => d.price);\n    let logScale = d3.scaleLog().domain([1e-6, d3.max(props.data, d => d.price)]).range([1, 100]);\n    const positionArr = props.data.map(d => ({\n      lat: d.lat,\n      lng: d.lng,\n      weight: d.price <= 0 ? Math.sqrt(median_price) : Math.sqrt(d.price),\n      // weight: logScale(d.price+1),\n      price: d.price\n    }));\n    const tempHeatmapData = {\n      positions: positionArr,\n      options: {\n        radius: 35,\n        opacity: 0.75,\n        dissipating: true // gradient: ,\n        // maxIntensity: , \n\n      }\n    };\n    setHeatmapData(tempHeatmapData);\n  }, [props.data]);\n  console.log(heatmapData); // Change the input data when we toggle the heatmap\n\n  useEffect(() => {\n    heatmap ? setInputData(heatmapData) : setInputData([]);\n  }, [heatmap]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Map\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => toggleHeatmap(!heatmap),\n      children: \"Toggle Heatmap\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(GoogleMapReact, {\n      bootstrapURLKeys: {\n        key: \"AIzaSyCnasDuC3M7MHKCLlxqXU3vyJnzKAnwBTw\",\n        libraries: [\"visualization\"]\n      },\n      defaultCenter: mapCenter,\n      defaultZoom: mapZoom,\n      heatmap: inputData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Map, \"TVrAxZUrIaTEvSHuGAy3eq3M3J8=\");\n\n_c = Map;\n\nvar _c;\n\n$RefreshReg$(_c, \"Map\");","map":{"version":3,"names":["React","useState","useEffect","GoogleMapReact","d3","Map","props","mapCenter","setMapCenter","lat","lng","mapZoom","setMapZoom","heatmapData","setHeatmapData","heatmap","toggleHeatmap","inputData","setInputData","median_price","median","data","d","price","logScale","scaleLog","domain","max","range","positionArr","map","weight","Math","sqrt","tempHeatmapData","positions","options","radius","opacity","dissipating","console","log","key","libraries"],"sources":["/Users/alanzhang/Housing-DashBoard-Web/hd-web/src/components/Map.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport \"./Map.css\";\nimport GoogleMapReact from 'google-map-react';\nimport * as d3 from 'd3';\n\nexport default function Map(props) {\n    const [mapCenter, setMapCenter] = useState({ lat: 32.86867512568862, lng: -117.21368983643102 });\n    const [mapZoom, setMapZoom] = useState(14);\n    const [heatmapData, setHeatmapData] = React.useState({});\n    const [heatmap, toggleHeatmap] = useState(false);\n    const [inputData, setInputData] = useState([]);\n\n    // Use square root transformation of the price variable to deal with right skewed data \n    useEffect(() => {\n        const median_price = d3.median(props.data, d => d.price);\n        let logScale = d3.scaleLog()\n            .domain([1e-6, d3.max(props.data, d=>d.price)])\n            .range([1, 100]);\n\n        const positionArr = props.data.map(d => ({\n            lat: d.lat,\n            lng: d.lng,\n            weight: d.price <= 0 ? Math.sqrt(median_price) : Math.sqrt(d.price),\n            // weight: logScale(d.price+1),\n            price: d.price,\n        })\n        );\n        const tempHeatmapData = {\n            positions: positionArr,\n            options: {\n                radius: 35,\n                opacity: 0.75,\n                dissipating: true,\n                // gradient: ,\n                // maxIntensity: , \n            }\n        };\n        setHeatmapData(tempHeatmapData);\n    }, [props.data]);\n\n    console.log(heatmapData)\n\n    // Change the input data when we toggle the heatmap\n    useEffect(() => {\n        heatmap ? setInputData(heatmapData) : setInputData([]);\n    }, [heatmap]);\n\n\n    return (\n        <div className=\"Map\">\n            <button onClick={() => toggleHeatmap(!heatmap)}>Toggle Heatmap</button>\n            {/* <button onClick={toggleHeatmap(prevState => !prevState)}>Toggle Heatmap</button> */}\n            <GoogleMapReact\n                bootstrapURLKeys={{\n                    key: \"AIzaSyCnasDuC3M7MHKCLlxqXU3vyJnzKAnwBTw\",\n                    libraries:[\"visualization\"]\n                }}\n                defaultCenter={mapCenter}\n                defaultZoom={mapZoom}\n                heatmap={inputData}\n            >\n            </GoogleMapReact>\n        </div>\n    )\n}"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,WAAP;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAO,KAAKC,EAAZ,MAAoB,IAApB;;AAEA,eAAe,SAASC,GAAT,CAAaC,KAAb,EAAoB;EAAA;;EAC/B,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC;IAAEQ,GAAG,EAAE,iBAAP;IAA0BC,GAAG,EAAE,CAAC;EAAhC,CAAD,CAA1C;EACA,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACY,WAAD,EAAcC,cAAd,IAAgCd,KAAK,CAACC,QAAN,CAAe,EAAf,CAAtC;EACA,MAAM,CAACc,OAAD,EAAUC,aAAV,IAA2Bf,QAAQ,CAAC,KAAD,CAAzC;EACA,MAAM,CAACgB,SAAD,EAAYC,YAAZ,IAA4BjB,QAAQ,CAAC,EAAD,CAA1C,CAL+B,CAO/B;;EACAC,SAAS,CAAC,MAAM;IACZ,MAAMiB,YAAY,GAAGf,EAAE,CAACgB,MAAH,CAAUd,KAAK,CAACe,IAAhB,EAAsBC,CAAC,IAAIA,CAAC,CAACC,KAA7B,CAArB;IACA,IAAIC,QAAQ,GAAGpB,EAAE,CAACqB,QAAH,GACVC,MADU,CACH,CAAC,IAAD,EAAOtB,EAAE,CAACuB,GAAH,CAAOrB,KAAK,CAACe,IAAb,EAAmBC,CAAC,IAAEA,CAAC,CAACC,KAAxB,CAAP,CADG,EAEVK,KAFU,CAEJ,CAAC,CAAD,EAAI,GAAJ,CAFI,CAAf;IAIA,MAAMC,WAAW,GAAGvB,KAAK,CAACe,IAAN,CAAWS,GAAX,CAAeR,CAAC,KAAK;MACrCb,GAAG,EAAEa,CAAC,CAACb,GAD8B;MAErCC,GAAG,EAAEY,CAAC,CAACZ,GAF8B;MAGrCqB,MAAM,EAAET,CAAC,CAACC,KAAF,IAAW,CAAX,GAAeS,IAAI,CAACC,IAAL,CAAUd,YAAV,CAAf,GAAyCa,IAAI,CAACC,IAAL,CAAUX,CAAC,CAACC,KAAZ,CAHZ;MAIrC;MACAA,KAAK,EAAED,CAAC,CAACC;IAL4B,CAAL,CAAhB,CAApB;IAQA,MAAMW,eAAe,GAAG;MACpBC,SAAS,EAAEN,WADS;MAEpBO,OAAO,EAAE;QACLC,MAAM,EAAE,EADH;QAELC,OAAO,EAAE,IAFJ;QAGLC,WAAW,EAAE,IAHR,CAIL;QACA;;MALK;IAFW,CAAxB;IAUAzB,cAAc,CAACoB,eAAD,CAAd;EACH,CAzBQ,EAyBN,CAAC5B,KAAK,CAACe,IAAP,CAzBM,CAAT;EA2BAmB,OAAO,CAACC,GAAR,CAAY5B,WAAZ,EAnC+B,CAqC/B;;EACAX,SAAS,CAAC,MAAM;IACZa,OAAO,GAAGG,YAAY,CAACL,WAAD,CAAf,GAA+BK,YAAY,CAAC,EAAD,CAAlD;EACH,CAFQ,EAEN,CAACH,OAAD,CAFM,CAAT;EAKA,oBACI;IAAK,SAAS,EAAC,KAAf;IAAA,wBACI;MAAQ,OAAO,EAAE,MAAMC,aAAa,CAAC,CAACD,OAAF,CAApC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,eAGI,QAAC,cAAD;MACI,gBAAgB,EAAE;QACd2B,GAAG,EAAE,yCADS;QAEdC,SAAS,EAAC,CAAC,eAAD;MAFI,CADtB;MAKI,aAAa,EAAEpC,SALnB;MAMI,WAAW,EAAEI,OANjB;MAOI,OAAO,EAAEM;IAPb;MAAA;MAAA;MAAA;IAAA,QAHJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAgBH;;GA3DuBZ,G;;KAAAA,G"},"metadata":{},"sourceType":"module"}