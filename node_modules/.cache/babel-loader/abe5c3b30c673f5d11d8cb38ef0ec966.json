{"ast":null,"code":"import _slicedToArray from\"/Users/alanzhang/Housing-DashBoard-Web/hd-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import\"./Map.css\";import GoogleMapReact from'google-map-react';import*as d3 from'd3';import{jsx as _jsx}from\"react/jsx-runtime\";export default function Map(props){var _useState=useState({lat:32.86867512568862,lng:-117.21368983643102}),_useState2=_slicedToArray(_useState,2),mapCenter=_useState2[0],setMapCenter=_useState2[1];var _useState3=useState(14),_useState4=_slicedToArray(_useState3,2),mapZoom=_useState4[0],setMapZoom=_useState4[1];var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),heatmapData=_React$useState2[0],setHeatmapData=_React$useState2[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),heatmap=_useState6[0],toggleHeatmap=_useState6[1];// Use square root transformation of the price variable to deal with right skewed data \nuseEffect(function(){var median_price=d3.median(props.data,function(d){return d.price;});var logScale=d3.scaleLog().domain([1e-6,d3.max(props.data,function(d){return d.price;})]).range([1,100]);var positionArr=props.data.filter(function(d){return d.lat&&d.lng;})// Filter out listings that do not have lat and lng values\n.map(function(d){return{lat:d.lat,lng:d.lng,weight:d.price<=0?Math.sqrt(median_price):Math.sqrt(d.price),// weight: logScale(d.price+1),\nprice:d.price};});var tempHeatmapData={positions:positionArr,options:{radius:35,opacity:0.75,dissipating:true// gradient: ,\n// maxIntensity: , \n}};setHeatmapData(tempHeatmapData);},[props.data]);// console.log(heatmapData)\n// Change the input data when we toggle the heatmap\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"Map\",children:/*#__PURE__*/_jsx(GoogleMapReact,{bootstrapURLKeys:{key:\"AIzaSyCnasDuC3M7MHKCLlxqXU3vyJnzKAnwBTw\",libraries:[\"visualization\"]},defaultCenter:mapCenter,defaultZoom:mapZoom,heatmap:heatmapData,fullscreenControl:false})});}","map":{"version":3,"names":["React","useState","useEffect","GoogleMapReact","d3","Map","props","lat","lng","mapCenter","setMapCenter","mapZoom","setMapZoom","heatmapData","setHeatmapData","heatmap","toggleHeatmap","median_price","median","data","d","price","logScale","scaleLog","domain","max","range","positionArr","filter","map","weight","Math","sqrt","tempHeatmapData","positions","options","radius","opacity","dissipating","key","libraries"],"sources":["/Users/alanzhang/Housing-DashBoard-Web/hd-web/src/components/Map.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport \"./Map.css\";\nimport GoogleMapReact from 'google-map-react';\nimport * as d3 from 'd3';\n\nexport default function Map(props) {\n    const [mapCenter, setMapCenter] = useState({ lat: 32.86867512568862, lng: -117.21368983643102 });\n    const [mapZoom, setMapZoom] = useState(14);\n    const [heatmapData, setHeatmapData] = React.useState({});\n    const [heatmap, toggleHeatmap] = useState(false);\n\n    // Use square root transformation of the price variable to deal with right skewed data \n    useEffect(() => {\n        const median_price = d3.median(props.data, d => d.price);\n        let logScale = d3.scaleLog()\n            .domain([1e-6, d3.max(props.data, d=>d.price)])\n            .range([1, 100]);\n\n        const positionArr = props.data\n            .filter(d => d.lat && d.lng) // Filter out listings that do not have lat and lng values\n            .map(d => ({\n            lat: d.lat,\n            lng: d.lng,\n            weight: d.price <= 0 ? Math.sqrt(median_price) : Math.sqrt(d.price),\n            // weight: logScale(d.price+1),\n            price: d.price,\n            })\n        );\n        const tempHeatmapData = {\n            positions: positionArr,\n            options: {\n                radius: 35,\n                opacity: 0.75,\n                dissipating: true,\n                // gradient: ,\n                // maxIntensity: , \n            }\n        };\n        setHeatmapData(tempHeatmapData);\n    }, [props.data]);\n\n    // console.log(heatmapData)\n\n    // Change the input data when we toggle the heatmap\n\n    return (\n        <div className=\"Map\">\n            {/* <button onClick={() => toggleHeatmap(!heatmap)}>Toggle Heatmap</button> */}\n            <GoogleMapReact\n                bootstrapURLKeys={{\n                    key: \"AIzaSyCnasDuC3M7MHKCLlxqXU3vyJnzKAnwBTw\",\n                    libraries:[\"visualization\"]\n                }}\n                defaultCenter={mapCenter}\n                defaultZoom={mapZoom}\n                heatmap={heatmapData}\n                fullscreenControl={false}\n            >\n            </GoogleMapReact>\n        </div>\n    )\n}"],"mappings":"mIAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAO,WAAP,CACA,MAAOC,eAAP,KAA2B,kBAA3B,CACA,MAAO,GAAKC,GAAZ,KAAoB,IAApB,C,2CAEA,cAAe,SAASC,IAAT,CAAaC,KAAb,CAAoB,CAC/B,cAAkCL,QAAQ,CAAC,CAAEM,GAAG,CAAE,iBAAP,CAA0BC,GAAG,CAAE,CAAC,kBAAhC,CAAD,CAA1C,wCAAOC,SAAP,eAAkBC,YAAlB,eACA,eAA8BT,QAAQ,CAAC,EAAD,CAAtC,yCAAOU,OAAP,eAAgBC,UAAhB,eACA,oBAAsCZ,KAAK,CAACC,QAAN,CAAe,EAAf,CAAtC,oDAAOY,WAAP,qBAAoBC,cAApB,qBACA,eAAiCb,QAAQ,CAAC,KAAD,CAAzC,yCAAOc,OAAP,eAAgBC,aAAhB,eAEA;AACAd,SAAS,CAAC,UAAM,CACZ,GAAMe,aAAY,CAAGb,EAAE,CAACc,MAAH,CAAUZ,KAAK,CAACa,IAAhB,CAAsB,SAAAC,CAAC,QAAIA,EAAC,CAACC,KAAN,EAAvB,CAArB,CACA,GAAIC,SAAQ,CAAGlB,EAAE,CAACmB,QAAH,GACVC,MADU,CACH,CAAC,IAAD,CAAOpB,EAAE,CAACqB,GAAH,CAAOnB,KAAK,CAACa,IAAb,CAAmB,SAAAC,CAAC,QAAEA,EAAC,CAACC,KAAJ,EAApB,CAAP,CADG,EAEVK,KAFU,CAEJ,CAAC,CAAD,CAAI,GAAJ,CAFI,CAAf,CAIA,GAAMC,YAAW,CAAGrB,KAAK,CAACa,IAAN,CACfS,MADe,CACR,SAAAR,CAAC,QAAIA,EAAC,CAACb,GAAF,EAASa,CAAC,CAACZ,GAAf,EADO,CACa;AADb,CAEfqB,GAFe,CAEX,SAAAT,CAAC,QAAK,CACXb,GAAG,CAAEa,CAAC,CAACb,GADI,CAEXC,GAAG,CAAEY,CAAC,CAACZ,GAFI,CAGXsB,MAAM,CAAEV,CAAC,CAACC,KAAF,EAAW,CAAX,CAAeU,IAAI,CAACC,IAAL,CAAUf,YAAV,CAAf,CAAyCc,IAAI,CAACC,IAAL,CAAUZ,CAAC,CAACC,KAAZ,CAHtC,CAIX;AACAA,KAAK,CAAED,CAAC,CAACC,KALE,CAAL,EAFU,CAApB,CAUA,GAAMY,gBAAe,CAAG,CACpBC,SAAS,CAAEP,WADS,CAEpBQ,OAAO,CAAE,CACLC,MAAM,CAAE,EADH,CAELC,OAAO,CAAE,IAFJ,CAGLC,WAAW,CAAE,IACb;AACA;AALK,CAFW,CAAxB,CAUAxB,cAAc,CAACmB,eAAD,CAAd,CACH,CA3BQ,CA2BN,CAAC3B,KAAK,CAACa,IAAP,CA3BM,CAAT,CA6BA;AAEA;AAEA,mBACI,YAAK,SAAS,CAAC,KAAf,uBAEI,KAAC,cAAD,EACI,gBAAgB,CAAE,CACdoB,GAAG,CAAE,yCADS,CAEdC,SAAS,CAAC,CAAC,eAAD,CAFI,CADtB,CAKI,aAAa,CAAE/B,SALnB,CAMI,WAAW,CAAEE,OANjB,CAOI,OAAO,CAAEE,WAPb,CAQI,iBAAiB,CAAE,KARvB,EAFJ,EADJ,CAgBH"},"metadata":{},"sourceType":"module"}